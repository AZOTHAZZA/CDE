<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>CalcLang è¨˜è¿°ç’°å¢ƒ (CDE) - æµ®ä¸Šã‚·ã‚§ãƒ« (L1)</title>
    <style>
        body { font-family: monospace; background-color: #1e1e1e; color: #d4d4d4; margin: 20px; }
        .container { max-width: 900px; margin: auto; }
        h1, h2, h3 { color: #569cd6; }
        textarea { width: 100%; height: 200px; background-color: #252526; color: #d4d4d4; border: 1px solid #3c3c3c; padding: 10px; box-sizing: border-box; resize: vertical; }
        button { padding: 10px 20px; background-color: #007acc; color: white; border: none; cursor: pointer; margin-top: 10px; }
        button:hover { background-color: #005f99; }
        .registry-panel { background-color: #252526; padding: 15px; border: 1px solid #3c3c3c; margin-bottom: 20px; }
        .log-entry { font-size: 0.9em; padding: 2px 0; border-bottom: 1px dotted #3c3c3c; }
        #calchost-content { min-height: 100px; background-color: #000000; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>CalcLang CDE æµ®ä¸Šã‚·ã‚§ãƒ« (L1)</h1>
    <p>**ç§çš„ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªæ²ˆé»™ã®ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ (L2/L3/L4)** ã‚’å…¥åŠ›ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ç©ºé–“ã«æµ®ä¸Šã•ã›ã¾ã™ã€‚</p>

    <div class="registry-panel">
        <strong>REGISTRY_CYCLE:</strong> <span id="cycle-value">0</span><br>
        <strong>REGISTRY_VARS:</strong> <span id="vars-value">{}</span>
    </div>

    <h3>L2/L3/L4 ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿)</h3>
    <p>// 1. CalcOSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’windowã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«æ˜ç¤ºçš„ã«æµ®ä¸Šã•ã›ã‚‹ã€‚</p>
    
    <script id="calc-core-logic">
// --- L2/L3/L4 çµ±åˆã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯å®šç¾© (ã‚°ãƒ­ãƒ¼ãƒãƒ«æµ®ä¸Š & L3å …ç‰¢åŒ–å®Œäº†ä¿®æ­£) ---
// CalcOSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’windowã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«æ˜ç¤ºçš„ã«æµ®ä¸Šã•ã›ã‚‹ã€‚
window.CalcOS = (function() {
    let REGISTRY;
    const DEFAULT_REGISTRY = {
        REGISTRY_CYCLE: 0, 
        REGISTRY_VARS: {}, 
        REGISTRY_HOST_S_EXPR: null, 
        REGISTRY_AUDIT_LOG: [],
    };
    // æ¯”è¼ƒæ¼”ç®—å­ã®å®šç¾©ã€‚å³æ ¼ãªæ¯”è¼ƒã‚’ç¶­æŒã€‚
    const COMPARISON_OPS = {
        '>': (a, b) => a > b, '<': (a, b) => a < b, '>=': (a, b) => a >= b,
        '<=': (a, b) => a <= b, '==': (a, b) => a === b, '!=': (a, b) => b !== a,
    };

    // UIè¦ç´ ã®å‚ç…§ (L1ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¾å­˜ - æœ€å°é™ã®ä¾å­˜)
    const $code = document.getElementById('calc-code');
    const $cycleValue = document.getElementById('cycle-value');
    const $varsValue = document.getElementById('vars-value');
    const $calcHostContent = document.getElementById('calchost-content');
    const $auditLogOutput = document.getElementById('audit-log-output');

    // UIæ›´æ–°é–¢æ•°
    function updateUI() {
        if ($cycleValue) $cycleValue.textContent = REGISTRY.REGISTRY_CYCLE;
        if ($varsValue) $varsValue.textContent = JSON.stringify(REGISTRY.REGISTRY_VARS);
        updateAuditLogUI();
    }
    
    function updateAuditLogUI() {
        if (!$auditLogOutput) return;
        $auditLogOutput.innerHTML = REGISTRY.REGISTRY_AUDIT_LOG.map(log => {
            const color = log.type === 'SUCCESS' ? 'yellowgreen' : log.type === 'ERROR' ? 'red' : 'white';
            return `<div class="log-entry" style="color: ${color};">
                [C:${log.cycle}] [${log.type}] ${log.message}
            </div>`;
        }).join('');
        $auditLogOutput.scrollTop = $auditLogOutput.scrollHeight;
    }

    function logAudit(type, message) {
        const entry = { type, message, cycle: REGISTRY.REGISTRY_CYCLE };
        REGISTRY.REGISTRY_AUDIT_LOG.push(entry);
        if (REGISTRY.REGISTRY_AUDIT_LOG.length > 30) {
            REGISTRY.REGISTRY_AUDIT_LOG.shift();
        }
    }

    function init() {
        REGISTRY = JSON.parse(JSON.stringify(DEFAULT_REGISTRY));
    }
    
    // --- L3: ã‚³ã‚¢ãƒ­ãƒ¼ãƒ€ãƒ¼ã®å½¹å‰² (ãƒ‘ãƒ¼ã‚¹) ---
    function parseCalcCode(code) {
        // ACT XXX ... END ACT ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢ (s: .ãŒæ”¹è¡Œã«ãƒãƒƒãƒ, g: ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢)
        const actBlocks = [];
        const regex = /(ACT\s+\w+.*?END\s+ACT)/gs; 
        let match;
        while ((match = regex.exec(code)) !== null) {
            actBlocks.push(match[1].trim());
        }
        return actBlocks;
    }
    
    function parseAct(actBlock) {
        // ACTãƒ˜ãƒƒãƒ€ãƒ¼è§£æ
        const headerMatch = actBlock.match(/^ACT\s+(\w+)\s*\((.*?)\s*\)?/s);
        let actName, paramsStr, body;

        if (headerMatch) {
            actName = headerMatch[1].trim(); 
            paramsStr = headerMatch[2] || ''; 
            body = actBlock.substring(headerMatch[0].length, actBlock.lastIndexOf('END ACT')).trim();
        } else {
            const simpleHeaderMatch = actBlock.match(/^ACT\s+(\w+)/s);
            if (simpleHeaderMatch) {
                actName = simpleHeaderMatch[1].trim();
                paramsStr = '';
                body = actBlock.substring(simpleHeaderMatch[0].length, actBlock.lastIndexOf('END ACT')).trim();
            } else {
                throw new Error("ACTãƒ˜ãƒƒãƒ€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: é©åˆ‡ãªACTåãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");
            }
        }
        
        const params = {};
        
        // ğŸ›¡ï¸ L3æœ€çµ‚ä¿®æ­£: æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å …ç‰¢ãªK/Vãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŠ½å‡º
        const paramRegex = /(\w+)\s*:\s*([^,]+)/g;
        let match;
        
        while ((match = paramRegex.exec(paramsStr)) !== null) {
            const key = match[1].trim();
            const value = match[2].trim();
            
            if (key) {
                // ã‚­ãƒ¼ã«å¯¾å¿œã™ã‚‹å€¤ã¨ã—ã¦ãã®ã¾ã¾æ ¼ç´
                params[key] = value; 
            }
        }

        return {
            name: actName,
            params: params,
            body: body,
            fullCode: actBlock
        };
    }
    
    // --- L4: ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã®å½¹å‰² (å€¤ã®è§£æ±º) ---
    function resolveValue(keyOrLiteral) {
        // ğŸ›¡ï¸ keyOrLiteralãŒnull/undefinedã®å ´åˆã®é˜²å¾¡
        if (keyOrLiteral === undefined || keyOrLiteral === null) {
            return undefined; 
        }

        // 1. æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‹ã‚‰ã®è§£æ±º (å¼•ç”¨ç¬¦é™¤å»)
        const trimmedLiteral = keyOrLiteral.replace(/^"|"$/g, ''); 
        
        // 2. å¤‰æ•°ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ã®è§£æ±º (å¼•ç”¨ç¬¦ã‚’é™¤å»ã—ãŸã‚­ãƒ¼ã§æ¤œç´¢)
        const value = REGISTRY.REGISTRY_VARS[trimmedLiteral];
        if (value !== undefined) {
            return value;
        }
        
        // 3. æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã¨ã—ã¦ã®è§£æ±º
        const num = Number(trimmedLiteral);
        if (!isNaN(num)) {
            return num;
        }
        
        // 4. REGISTRY_CYCLEã®è§£æ±º
        if (trimmedLiteral === 'REGISTRY_CYCLE') {
            return REGISTRY.REGISTRY_CYCLE;
        }

        // 5. æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¨ã—ã¦ãã®ã¾ã¾è¿”ã™ (å¼•ç”¨ç¬¦ã‚’é™¤å»ã—ãŸçŠ¶æ…‹)
        return trimmedLiteral;
    }

    function evaluateCondition(conditionStr) {
        const parts = conditionStr.match(/(\w+|"[^"]*"|\d+)\s*([<|>|<=|>=|==|!=])\s*(\w+|"[^"]*"|\d+)/);
        
        if (!parts || parts.length !== 4) {
            throw new Error(`IFæ¡ä»¶å¼æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ${conditionStr}`);
        }

        const v1Raw = parts[1].trim(); 
        const op = parts[2].trim();
        const v2Raw = parts[3].trim(); 
        
        const v1 = resolveValue(v1Raw);
        const v2 = resolveValue(v2Raw);

        const operatorFn = COMPARISON_OPS[op];
        if (!operatorFn) {
            throw new Error(`IFæ¡ä»¶å¼: æœªçŸ¥ã®æ¯”è¼ƒæ¼”ç®—å­ ${op}`);
        }

        if (typeof v1 === 'number' && typeof v2 === 'number') {
            return operatorFn(v1, v2);
        } 
        
        return operatorFn(v1.toString(), v2.toString());
    }

    // Calc-VM (ACTå…¬ç†å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³) - å®Ÿè¡Œæœ¬ä½“
    function vmExecuteAct(act) {
        const actName = act.name;
        const actParams = act.params;

        // --- ACT LET --- 
        if (actName === 'LET') {
            const keyRaw = actParams.K; 
            
            if (!keyRaw) {
                throw new Error("Kãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚");
            }

            const key = keyRaw.replace(/^"|"$/g, ''); 
            let valueRaw = actParams.V;
            
            const resolvedValue = resolveValue(valueRaw);
            
            if (key) {
                REGISTRY.REGISTRY_VARS[key] = resolvedValue;
                REGISTRY.REGISTRY_CYCLE += 1;
                logAudit('SUCCESS', `ACT LETãŒå®Œäº†: ${key} = ${resolvedValue}`);
            } else {
                throw new Error("Kãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ãŒç©ºæ–‡å­—åˆ—ã§ã™ã€‚"); 
            }
            return "SUCCESS";
        }
        
        // --- ACT CALC --- 
        if (actName === 'CALC') {
            const KRaw = actParams.K;
            const K = KRaw ? KRaw.replace(/^"|"$/g, '') : null;
            const OP = (actParams.OP || "").replace(/^"|"$/g, '').trim(); 
            const V1 = resolveValue(actParams.V1);
            const V2 = resolveValue(actParams.V2);
            
            if (typeof V1 !== 'number' || typeof V2 !== 'number') {
                 throw new Error(`CALCå¤±æ•—: V1 (${actParams.V1}) ã¾ãŸã¯ V2 (${actParams.V2}) ãŒæ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚`);
            }
            let result;
            switch (OP) {
                case 'ADD': result = V1 + V2; break;
                case 'SUB': result = V1 - V2; break;
                case 'MUL': result = V1 * V2; break;
                case 'DIV': 
                    if (V2 === 0) throw new Error("CALCå¤±æ•—: ã‚¼ãƒ­é™¤ç®—ã‚¨ãƒ©ãƒ¼");
                    result = V1 / V2; 
                    break;
                default:
                    throw new Error(`CALCå¤±æ•—: æœªçŸ¥ã®æ¼”ç®—å­ ${OP}`);
            }
            REGISTRY.REGISTRY_VARS[K] = result;
            REGISTRY.REGISTRY_CYCLE += 1;
            logAudit('SUCCESS', `ACT CALCãŒå®Œäº†: ${K} = ${V1} ${OP} ${V2} = ${result}`);
            return "SUCCESS";
        }

        // --- ACT IF --- 
        if (actName === 'IF') {
            const conditionStr = actParams.CONDITION;
            let result;
            try {
                result = evaluateCondition(conditionStr);
            } catch (e) {
                 logAudit('ERROR', `ACT IFæ¡ä»¶è©•ä¾¡å¤±æ•—: ${e.message}`);
                 throw new Error("IFæ¡ä»¶è©•ä¾¡å¤±æ•—");
            }
            
            logAudit('AUDIT', `ACT IF: æ¡ä»¶ "${conditionStr}" ã®è©•ä¾¡çµæœã¯ ${result} ã§ã™ã€‚`);

            if (result === true) {
                const nestedActList = parseCalcCode(act.body);
                for (const nestedActCode of nestedActList) {
                    const nestedAct = parseAct(nestedActCode);
                    vmExecuteAct(nestedAct);
                }
                logAudit('SUCCESS', 'ACT IF: æ¡ä»¶ãŒçœŸã®ãŸã‚ã€å†…éƒ¨ACTã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚');
            } else {
                logAudit('AUDIT', 'ACT IF: æ¡ä»¶ãŒå½ã®ãŸã‚ã€å†…éƒ¨ACTã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸã€‚');
            }
            return "SUCCESS";
        }

        // --- ACT LOOP --- 
        if (actName === 'LOOP') {
            const countRaw = actParams.COUNT;
            const count = parseInt(resolveValue(countRaw), 10); 
            
            if (isNaN(count) || count <= 0) {
                throw new Error(`LOOPå¤±æ•—: ç„¡åŠ¹ãªã‚«ã‚¦ãƒ³ãƒˆå€¤ ${countRaw}ã€‚`);
            }
            const nestedActList = parseCalcCode(act.body); 
            for (let i = 0; i < count; i++) {
                for (const nestedActCode of nestedActList) {
                    const nestedAct = parseAct(nestedActCode);
                    vmExecuteAct(nestedAct);
                }
            }
            logAudit('SUCCESS', `ACT LOOPãŒå®Œäº†ã—ã¾ã—ãŸ (${count}å›)ã€‚`);
            return "SUCCESS";
        }
        
        // --- ACT DEPLOY/IO ã¯ã‚³ã‚¢æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚å‰Šé™¤ ---
        if (actName === 'DEPLOY' || actName === 'IO') {
            logAudit('AUDIT', `ACT ${actName} ã¯ã‚³ã‚¢æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã—ãŸã€‚`);
            return "SUCCESS";
        }
        
        // --- ACT STRING (æ–‡å­—åˆ—æ“ä½œ) ---
        if (actName === 'STRING') {
            const KRaw = actParams.K;
            const K = KRaw ? KRaw.replace(/^"|"$/g, '') : null;
            const OP = (actParams.OP || "").replace(/^"|"$/g, '').trim(); 

            if (OP === 'CONCAT') {
                let result = "";
                let i = 1;
                while (actParams[`V${i}`] !== undefined) {
                    const rawVal = actParams[`V${i}`]; 
                    const val = resolveValue(rawVal); 
                    result += val.toString();
                    i++;
                }
                
                REGISTRY.REGISTRY_VARS[K] = result;
                REGISTRY.REGISTRY_CYCLE += 1;
                logAudit('SUCCESS', `ACT STRING (CONCAT) ãŒå®Œäº†: ${K} = "${result}"`);
            } else {
                throw new Error(`STRINGå¤±æ•—: æœªçŸ¥ã®æ¼”ç®—å­ '${OP}' ã§ã™ã€‚`);
            }
            return "SUCCESS";
        }
        
        throw new Error(`VM: æœªçŸ¥ã®ACTå…¬ç† '${actName}' ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚`);
    }
    
    // Calc-VMã®å…¨ä½“å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ 
    function executeAct(actCode) {
        let actList;
        try {
            actList = parseCalcCode(actCode);
        } catch(e) {
            logAudit('ERROR', `ã‚³ãƒ¼ãƒ‰è§£æã‚¨ãƒ©ãƒ¼: ${e.message}`);
            return { status: "ERROR", reason: "PARSER_FAILURE" };
        }

        let overallStatus = "SUCCESS";
        
        for (const actBlock of actList) {
            try {
                const act = parseAct(actBlock);
                vmExecuteAct(act); 
            } catch (e) {
                REGISTRY.REGISTRY_CYCLE += 1; 
                logAudit('ERROR', `ACTå®Ÿè¡Œå¤±æ•—: ${e.message} [ã‚³ãƒ¼ãƒ‰: ${actBlock.substring(0, 50)}...]`);
                overallStatus = "ERROR";
                break; 
            }
            if (overallStatus === "ERROR") break; 
        }
        
        // æœ€çµ‚çš„ãªUIæ›´æ–°
        updateUI();

        return { status: overallStatus, reason: overallStatus === "SUCCESS" ? "ALL_ACTS_EXECUTED" : "EXECUTION_ERROR" };
    }


    return {
        init: init,
        executeAct: executeAct, 
        updateUI: updateUI,    
        renderHost: function() {
            if ($calcHostContent) {
                 $calcHostContent.innerHTML = 'CalcHost: æç”»å…¬ç† (ACT DEPLOY) ã¯ã€æ²ˆé»™ã®ãƒ¡ãƒ¢å¸³ã®å®‰å®šåŒ–ã®ãŸã‚ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚';
            }
            logAudit('AUDIT', 'RENDERæ©Ÿèƒ½ã¯ã‚³ã‚¢æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚');
            updateUI();
        },
    };
})();

// --- L2/L3/L4 çµ±åˆã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯å®šç¾© çµ‚äº† ---
    </script>
    
    <hr>

    <h3>ACTå…¬ç† (ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›) + ACTå…¬ç†å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯</h3>
    <p>ä»¥ä¸‹ã®ã‚¨ãƒªã‚¢ã«ACTå…¬ç†ã‚’è¨˜è¿°ã—ã€å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
    
    <textarea id="act-code-input">// ã“ã“ã«å®Ÿè¡Œã—ãŸã„ ACTå…¬ç† ã‚’è¨˜è¿°ã—ã¾ã™ã€‚
// ä¾‹:
ACT LET ( K: "VAR_1", V: 100 ) END ACT
ACT CALC ( K: "VAR_2", OP: "ADD", V1: "VAR_1", V2: 50 ) END ACT</textarea>

    <button onclick="runCalcOS()">â–¶ï¸ ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œ (Execute in VM)</button>
    
    <hr>
    
    <script>
        /**
         * L1ã¨CalcOSã‚³ã‚¢ã‚’çµã³ã¤ã‘ã‚‹é–¢æ•°ã€‚
         * UIã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€CalcOS.executeAct()ã‚’å‘¼ã³å‡ºã™ã€‚
         */
        function runCalcOS() {
            // L2/L3/L4ã‚³ã‚¢ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
            if (typeof window.CalcOS === 'undefined' || typeof window.CalcOS.executeAct !== 'function') {
                alert("ã‚¨ãƒ©ãƒ¼: CalcOSã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ãæµ®ä¸Šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
                return;
            }

            // å®Ÿè¡Œå‰ã«ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™ï¼ˆãƒ†ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³ã«ã™ã‚‹ãŸã‚ï¼‰
            window.CalcOS.init();
            
            // ğŸ’¡ L1ã®ACTã‚³ãƒ¼ãƒ‰å…¥åŠ›ã‚¨ãƒªã‚¢ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
            const actCode = document.getElementById('act-code-input').value; 
            
            // 3. ACTå…¬ç†ã®å®Ÿè¡Œ
            const result = window.CalcOS.executeAct(actCode);

            // 4. çµæœã®æç”»
            // å®Ÿè¡Œé–¢æ•°å†…ã§UIæ›´æ–°ã¯è¡Œã‚ã‚Œã¾ã™ãŒã€å¿µã®ãŸã‚å†åº¦å‘¼ã³å‡ºã™
            window.CalcOS.renderHost(); 
            
            console.log("CalcOS Execution Status:", result.status);
        }

        // L1ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç›´å¾Œã«CalcOSã‚³ã‚¢ã‚’åˆæœŸåŒ–
        window.onload = function() {
            if (typeof window.CalcOS !== 'undefined' && typeof window.CalcOS.init === 'function') {
                window.CalcOS.init();
                window.CalcOS.updateUI(); // åˆæœŸUIã‚’æ›´æ–°
            }
        };
    </script>

    <hr>

    <h3>ğŸ“œ Calc-Audit Log (ç›£æŸ»è¨˜éŒ²)</h3>
    <div id="audit-log-output" style="max-height: 250px; overflow-y: auto; background-color: #000000; padding: 10px;">
        </div>

    <h2>ğŸŒ CalcHost - è«–ç†çš„æç”»é ˜åŸŸ (æµ®ä¸Šå¾…æ©Ÿä¸­)</h2>
    <div id="calchost-content">
        L1ãŒæä¾›ã™ã‚‹æç”»ã‚¨ãƒªã‚¢ã§ã™ã€‚L4ã®ACT DEPLOYå…¬ç†ã«ã‚ˆã£ã¦æ”¯é…ã•ã‚Œã‚‹ã®ã‚’å¾…ã¡ã¾ã™ã€‚
    </div>

</div>
</body>
</html>
